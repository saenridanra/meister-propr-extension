<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Meister ProPR</title>
</head>
<body>
    <div id="review-root">
        <h2>Meister ProPR — AI Code Review</h2>

        <div id="config-warning" style="display:none">
            <p>
                Please configure the extension in
                <strong>Project Settings → Meister ProPR</strong>
                before using.
            </p>
        </div>

        <div id="input-section">
            <div class="form-group">
                <label for="repo-select">Repository</label>
                <select id="repo-select">
                    <option value="">— Select a repository —</option>
                </select>
            </div>

            <div class="form-group">
                <label for="pr-search">Pull Request</label>
                <div class="autocomplete-wrapper">
                    <input type="text" id="pr-search" placeholder="Select a repository first"
                           autocomplete="off" spellcheck="false" disabled>
                    <ul id="pr-dropdown" class="autocomplete-dropdown" hidden></ul>
                </div>
            </div>

            <button id="review-btn">Review with AI</button>
        </div>

        <div id="loading" style="display:none">Submitting review…</div>

        <div id="error-message" style="display:none"></div>

        <div id="results-section" style="display:none">
            <h3>Review Summary</h3>
            <p id="results-context" class="results-context"></p>
            <div id="review-summary"></div>

            <h3>Comments</h3>
            <table id="results-table">
                <thead>
                    <tr>
                        <th>File</th>
                        <th>Line</th>
                        <th>Severity</th>
                        <th>Comment</th>
                    </tr>
                </thead>
                <tbody id="results-body"></tbody>
            </table>
        </div>

        <div id="jobs-section" style="display:none">
            <h3>Recent Reviews</h3>
            <table id="jobs-table">
                <thead>
                    <tr>
                        <th>PR</th>
                        <th>Repository</th>
                        <th>Status</th>
                        <th>Submitted</th>
                        <th>Completed</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="jobs-body"></tbody>
            </table>
        </div>
    </div>

    <script src="dist/review.js"></script>
</body>
</html>
